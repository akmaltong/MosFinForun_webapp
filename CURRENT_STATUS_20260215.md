# –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (15.02.2026)

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (Done)

### 1. –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Navigation System)
*   **NavMesh Pathfinding**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∏—Å–∫ –ø—É—Ç–∏ —á–µ—Ä–µ–∑ NavMesh (`src/utils/navigation.ts`).
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `findPathOnNavMesh` –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ A* –ø–æ–∏—Å–∫–∞.
    *   –ó–∞–≥—Ä—É–∑–∫–∞ `Navmesh.glb`.
    *   –§–æ–ª–ª–ª–±–µ–∫ –Ω–∞ –ø—Ä—è–º—É—é –ª–∏–Ω–∏—é, –µ—Å–ª–∏ –ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω.
*   **–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –ø—É—Ç–∏ (Path Smoothing)**:
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º `simplifyPath` (Greedy Fan Pattern).
    *   –£–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–µ —Ç–æ—á–∫–∏ –ø—É—Ç–∏, –ø—Ä–æ–≤–µ—Ä—è—è –ø—Ä—è–º—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ `hasObstacleBetween`.
    *   –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—É—Ç—å –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–∫–≤–æ–∑—å —Å—Ç–µ–Ω—ã.

### 2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ (Route Visualization)
*   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `RouteVisualization.tsx`:
    *   **–õ–∏–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞**: –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–≥–ª–∞–∂–µ–Ω–Ω–æ–π –∫—Ä–∏–≤–æ–π (`THREE.CubicBezierCurve3` –∏–ª–∏ —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–∏–Ω–∏—è) –Ω–∞ –ø–æ–ª—É.
    *   **–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–µ–ª–∫–∏**: –ë–µ–≥—É—â–∏–µ —à–µ–≤—Ä–æ–Ω—ã (`FloorArrows`) –≤–¥–æ–ª—å –ø—É—Ç–∏, —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
    *   **–ú–∞—Ä–∫–µ—Ä —Ü–µ–ª–∏**: –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–π 3D-–º–∞—Ä–∫–µ—Ä (`PulsingDestination`) –≤ —Ç–æ—á–∫–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
    *   –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –Ω–∞ –∫—Ä–∞—è—Ö).

### 3. –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π (Collision Detection)
*   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `src/utils/collisionDetection.ts`.
*   **Raycasting**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `THREE.Raycaster` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.
*   **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–µ–Ω (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ `floor`, `ground`, `navmesh`).
*   **Walkability Check**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ç–æ—á–µ–∫ (`isPointWalkable`) –∏ –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π —Ç–æ—á–∫–∏ (`getNearestWalkablePoint`).

### 4. –û—Ç–ª–∞–¥–∫–∞ (Debugging)
*   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `NavigationDebug.tsx` –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —É–∑–ª–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

## üöÄ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (Working Features)
*   ‚úÖ **–†–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ç—Ä–æ–∏—Ç –ø—É—Ç—å –æ—Ç —Ç–æ—á–∫–∏ –ê –¥–æ —Ç–æ—á–∫–∏ –ë, –æ–≥–∏–±–∞—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.
*   ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—É—Ç–∏**: –õ–æ–º–∞–Ω—ã–µ –ª–∏–Ω–∏–∏ NavMesh –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –±–æ–ª–µ–µ –ø—Ä—è–º—ã–µ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.
*   ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å**: –ú–∞—Ä—à—Ä—É—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ 3D —Å—Ü–µ–Ω–µ, —Å—Ç—Ä–µ–ª–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –¥–≤–∏–∂–µ–Ω–∏–µ.
*   ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—É—Ç—å –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–∫–≤–æ–∑—å —Å—Ç–µ–Ω—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–ª–ª–∏–∑–∏–π –ø—Ä–∏ —É–ø—Ä–æ—â–µ–Ω–∏–∏.

## üìã –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–æ–∫ (To Do)
1.  **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:
    *   –ö–æ–ª–ª–∏–∑–∏—è —Å–µ–π—á–∞—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç *–≤—Å–µ* –æ–±—ä–µ–∫—Ç—ã, –∫—Ä–æ–º–µ –ø–æ–ª–∞. –î–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ü–µ–Ω —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å BVH (Bounding Volume Hierarchy) –∏–ª–∏ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –∫–æ–ª–ª–∏–∑–∏–æ–Ω–Ω—É—é –º–æ–¥–µ–ª—å.
2.  **–£–ª—É—á—à–µ–Ω–∏–µ NavMesh**:
    *   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å `Navmesh.glb`. –ï—Å–ª–∏ –∞–≥–µ–Ω—Ç –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–µ—á—å NavMesh —Å –±–æ–ª—å—à–∏–º —Ä–∞–¥–∏—É—Å–æ–º –∞–≥–µ–Ω—Ç–∞.
3.  **–ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è**:
    *   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å FPS –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –¥–ª–∏–Ω–Ω—ã—Ö –ø—É—Ç–µ–π.
4.  **UI –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
    *   –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI –≤—ã–±–æ—Ä–∞ –º–∞–≥–∞–∑–∏–Ω–æ–≤/—Ç–æ—á–µ–∫ –∏–Ω—Ç–µ—Ä–µ—Å–∞ (POI).

## üõ† –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run dev`.
2.  –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω—É—é –∏ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É (—á–µ—Ä–µ–∑ Debug UI –∏–ª–∏ –∫–ª–∏–∫–æ–º, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω—ã).
3.  –ù–∞–±–ª—é–¥–∞–π—Ç–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏—é.
